{% extends "core/base.html" %}

{% block title %} Listado de Productos {% endblock %}

{% block content %}
<h1 class="text-center">Listado de Productos</h1>
<a href="{% url 'productos:producto-create' %}" class="btn btn-outline-success">Nuevo Producto</a>
<hr>
<table class="table table-hover table-striped table-bordered">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Codigo</th>
      <th scope="col">Nombre</th>
      <th scope="col">Precio Venta</th>
      <th scope="col">Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% comment %} Iterar sobre los productos de la BD {% endcomment %}
    {% for p in productos %}
    <tr>
      {% comment %} agregar un enumerate {% endcomment %}
      <th scope="row">{{ forloop.counter }}</th> 
      <th>{{ p.id }}</th>
      <td>{{ p.nombre }}</td>
      <td>$ {{ p.precio_venta|floatformat:2 }}</td>
      <td>
        {% if user.username == 'admin' %}
        <a href="{% url 'productos:producto-detail' p.id %}" class="btn btn-outline-info">Detalle</a>
        <a href="{% url 'productos:producto-update' p.id %}" class="btn btn-outline-warning">Editar</a>
        <a href="{% url 'productos:producto-delete' p.id %}" class="btn btn-outline-danger">Eliminar</a>
        {% else %}
        <a href="{% url 'productos:producto-detail' p.id %}" class="btn btn-outline-info">Detalle</a>
        <a href="{% url 'productos:producto-update' p.id %}" class="btn btn-outline-warning">Editar</a>
        {% endif %}
        
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}

